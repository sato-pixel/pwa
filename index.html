<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="theme-color" content="#0b57d0" />
<title>PWA サンプル（GitHub Pages）</title>
<link rel="manifest" href="./manifest.webmanifest" />
<link rel="icon" href="./icons/icon-192.png" />
<style>
body{font-family:system-ui,Roboto,sans-serif;margin:2rem;line-height:1.6;color:#222;background:#f9fafb;text-align:center}
button{background:#0b57d0;color:white;padding:1em 1.5em;border:none;border-radius:10px;font-size:1rem;cursor:pointer;margin-top:1.5rem}
#status{margin-top:2rem;color:#555}
</style>
</head>
<body>
<h1>📱 ホーム画面に追加できるサンプル</h1>
<p>このページは GitHub Pages で公開した PWA サンプルです。</p>


<!-- ▼ Google Sites への導線：ボタン＋iframe 埋め込み -->
<a
href="https://sites.google.com/nagoyagaiko.net/uyng/%E3%83%9B%E3%83%BC%E3%83%A0"
target="_blank"
style="display:inline-block;background:#1a73e8;color:#fff;padding:1em 1.5em;border-radius:8px;text-decoration:none;margin:1rem 0;">
🌐 公式サイトを開く（新しいタブ）
</a>


<iframe
src="https://sites.google.com/nagoyagaiko.net/uyng/%E3%83%9B%E3%83%BC%E3%83%A0"
width="100%" height="700"
style="border:1px solid #ccc;border-radius:10px;">
</iframe>
<p style="font-size:14px;color:#666;">※ Google Sites は外部ドメインのため、オフライン時や埋め込み制限時は iframe が表示されません。その場合は上のボタンをご利用ください。</p>


<button id="installButton" hidden>インストール</button>
<div id="status"></div>


<script>
// Service Worker 登録
if ('serviceWorker' in navigator) {
navigator.serviceWorker.register('./service-worker.js').then(()=>{
console.log('SW registered');
}).catch(console.error);
}


// Install Prompt 制御
let deferredPrompt;
const installButton = document.getElementById('installButton');
window.addEventListener('beforeinstallprompt', (e) => {
e.preventDefault();
deferredPrompt = e;
installButton.hidden = false;
document.getElementById('status').textContent = 'インストール可能です！';
});
installButton.addEventListener('click', async () => {
if (!deferredPrompt) return;
deferredPrompt.prompt();
const choice = await deferredPrompt.userChoice;
document.getElementById('status').textContent = `結果: ${choice.outcome}`;
deferredPrompt = null;
installButton.hidden = true;
});
</script>
</body>
</html>