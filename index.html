<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="theme-color" content="#0b57d0" />
<title>PWA サンプル（sato-pixel/pwa｜GitHub Pages）</title>
<link rel="manifest" href="./manifest.webmanifest" />
<link rel="icon" href="./icons/icon-192.png" />
<style>
body{font-family:system-ui,Roboto,sans-serif;margin:2rem;line-height:1.6;color:#222;background:#f9fafb;text-align:center}
button{background:#0b57d0;color:white;padding:1em 1.5em;border:none;border-radius:10px;font-size:1rem;cursor:pointer;margin-top:1.5rem}
#status{margin-top:2rem;color:#555}
</style>
</head>
<body>
<script>
  // index.html の <body> の先頭などに配置
  window.location.href = "https://sites.google.com/nagoyagaiko.net/uyng/ホーム";
</script>

<h1>📱 ホーム画面に追加できるサンプル</h1>
<p>公開URL: <code>https://sato-pixel.github.io/pwa/</code></p>


<button id="installButton" hidden>インストール</button>
<div id="status"></div>


<script>
// Service Worker 登録（GitHub Pages のサブパス対応: 相対パス指定）
if ('serviceWorker' in navigator) {
navigator.serviceWorker.register('./service-worker.js').then(()=>{
console.log('SW registered');
}).catch(console.error);
}


// Install Prompt 制御
let deferredPrompt;
const installButton = document.getElementById('installButton');
window.addEventListener('beforeinstallprompt', (e) => {
e.preventDefault();
deferredPrompt = e;
installButton.hidden = false;
document.getElementById('status').textContent = 'インストール可能です！';
});
installButton.addEventListener('click', async () => {
if (!deferredPrompt) return;
deferredPrompt.prompt();
const choice = await deferredPrompt.userChoice;
document.getElementById('status').textContent = `結果: ${choice.outcome}`;
deferredPrompt = null;
installButton.hidden = true;
});
</script>
</body>
</html>